<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script type="text/javascript">
    // Advanced Chart
    new TradingView.widget({
        "autosize": true, "symbol": "FX:EURUSD", "interval": "1", "theme": "dark", "style": "1",
        "container_id": "chart_container", "hide_side_toolbar": false, "allow_symbol_change": true,
        "studies": [ "RSI@tv-basicstudies", "StochasticRSI@tv-basicstudies", "PivotPointsHighLow@tv-basicstudies" ]
    });

    // Precision Timer & News Sim
    function startEngine() {
        setInterval(() => {
            let now = new Date();
            let s = 60 - now.getSeconds();
            if (s == 60) s = 0;
            let timerEl = document.getElementById('timer');
            timerEl.innerText = "00:" + (s < 10 ? "0" : "") + s;
            
            // Last 5 seconds alert
            if(s <= 5 && s > 0) {
                timerEl.style.color = "var(--danger)";
            } else if(s == 0) {
                timerEl.style.color = "var(--success)";
                timerEl.innerText = "TRADE NOW!";
            } else {
                timerEl.style.color = "var(--neon)";
            }

            // News Alert Simulation
            if(now.getMinutes() % 15 == 0) {
                document.getElementById('news-alert').innerText = "ðŸ”´ NEWS: HIGH VOLATILITY - WAIT!";
                document.getElementById('news-alert').style.color = "var(--danger)";
            } else {
                document.getElementById('news-alert').innerText = "ðŸŸ¢ NEWS: NO VOLATILITY";
                document.getElementById('news-alert').style.color = "var(--success)";
            }
        }, 1000);
    }

    function calcRec() {
        let loss = document.getElementById('lastLoss').value;
        if(loss) document.getElementById('recVal').innerText = "Next Trade: $" + (loss * 2.25).toFixed(2);
    }
    
    startEngine();
</script>

</body>
</html>
